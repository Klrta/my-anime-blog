
# 2025-06-20 Slug 重构笔记系统总结

## 🔄 重构思路概览

这次我把博客的文章系统从“数字 ID 模式”重构为了“slug 模式”，也就是从 `/post/1` 变成了 `/post/my-first-post` 这种更语义化的路径。

---

## ✨ 核心步骤总结

### ✅ 1. 修改 `posts.js` 数据结构

原本用 `id + file`，现在加入：

- `slug`: 唯一的英文路径片段（如 `my-first-post`）
- `file`: 对应 `.md` 文件名（如 `my-first-post.md`）

```js
{
  id: 1,
  slug: 'my-first-post',
  title: '我的第一篇博客',
  file: 'my-first-post.md',
}
```

---

### ✅ 2. 修改路由配置为基于 slug 的动态路径

```js
{ path: '/post/:slug', component: PostDetail }
```

---

### ✅ 3. 数据流动理解：App.vue ➝ Home.vue ➝ PostCard.vue ➝ PostDetail.vue

#### 📌 Home.vue
- 使用 `v-for="post in posts"` 遍历文章数组
- `:key="post.id"` 保证渲染稳定
- `:post="post"` 传递数据给子组件

#### 📌 PostCard.vue
- 修改 `<router-link :to="...">` 为基于 slug 的路径：
```vue
<router-link :to="`/post/${post.slug}`">阅读更多</router-link>
```

---

### ✅ 4. PostDetail.vue 实现逻辑

```js
const slug = route.params.slug
const post = posts.find(p => p.slug === slug)
const res = await fetch(`/posts/${post.file}`)
```

- 通过 slug 找到对应的 `post`
- 再通过 `post.file` 加载 `.md` 文件
- 使用 `front-matter` 解析 front matter（YAML 信息）
- 使用 `marked.parse` 渲染 Markdown 正文
- 把元信息赋值给 `postMeta.value`
- 把正文赋值给 `htmlContent.value`

---

## 🧠 我的理解 & 思考

- **Home.vue** 相当于总览页，只负责“展示”
- **PostCard.vue** 相当于点击跳转链接的桥梁
- **PostDetail.vue** 是负责“读文件 + 渲染”的关键

虽然我没完全看懂 async 的逻辑，但我理解到它就是“等文件加载完再处理数据”。

---

## 💬 自我评价

我这次重构 slug 模式，其实改动的是整个「文章索引逻辑 + 路由跳转 + 内容加载」链条。  
比起死记硬背，我更关注了“数据怎么流动”，虽然我学得慢，但这是我真正掌握的第一步。

> 我不是学得快的人，但我是愿意反复咀嚼、一步步靠近目标的人。

---

## ✅ 成果

- 支持 slug 跳转
- 支持多文章 `.md` 文件
- 每篇文章有封面、标题、日期、标签、内容
- 页面跳转逻辑清晰，组件职责明确

---

## 💡 下一步计划

- [ ] 分类筛选系统（点击标签跳转）
- [ ] 博客样式优化
- [ ] GitHub Pages 部署上线
- [ ] 看板娘插件尝试加入

---

> 博客也许写得慢，但这每一行路都是我自己走出来的♡
